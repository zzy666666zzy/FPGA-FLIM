#include "stdio.h"
#include "AdderNet.h"
#include "Pre1.h"

int main(void)
{
	Dtype_f tau_inten[Hout_O1_3][Wout_O1_3][CHout_O1_3];
	Dtype_f tau_amp[Hout_O1_3][Wout_O1_3][CHout_O1_3];
	Dtype_f feature_Pre2[Hin_Pre2][Win_Pre2][CHout_Pre2];
	Dtype_f feature_in[Hin_Pre1][Win_Pre1]={0.0065789,0.0098684,0.0098684,0.023026,0.036184,0.013158,0.016447,0.016447,0.016447,0.019737,0.042763,0.12171,0.40461,0.89803,1,0.80263,0.41447,0.25658,0.15461,0.11184,0.098684,0.069079,0.049342,0.046053,0.055921,0.042763,0.023026,0.023026,0.016447,0.019737,0.029605,0.029605,0.023026,0.013158,0.039474,0.016447,0.0098684,0.036184,0.029605,0.029605,0.036184,0.042763,0.055921,0.016447,0.023026,0.042763,0.019737,0.013158,0.026316,0.013158,0.013158,0.0098684,0.013158,0.0098684,0.023026,0.013158,0.036184,0.023026,0.0098684,0.013158,0.013158,0.032895,0.0098684,0.016447,0.023026,0.026316,0.013158,0.0098684,0.019737,0.0098684,0.0065789,0.0065789,0.0065789,0.0065789,0.0098684,0.013158,0.0098684,0.0065789,0.0065789,0.0098684,0.0065789,0.016447,0.013158,0.016447,0.0065789,0.0065789,0.013158,0.0032895,0.0032895,0.0098684,0.016447,0.013158,0.013158,0.0098684,0.0098684,0.0065789,0,0.013158,0.0065789,0.0098684,0,0.0065789,0.0032895,0.0098684,0.0065789,0.013158,0.0065789,0.0098684,0.0065789,0.013158,0.0098684,0.016447,0.0098684,0.013158,0.016447,0.0098684,0.0065789,0.0065789,0.0032895,0.0032895,0.0032895,0,0.0065789,0,0.0032895,0,0.0098684,0.0065789,0.0098684,0.0065789,0.0032895,0.0098684,0,0.0098684,0,0.0032895,0,0.016447,0.0065789,0.0065789,0.0065789,0,0.0032895,0.0032895,0,0.0032895,0,0,0,0,0.0098684,0.0065789,0.0065789,0.0098684,0,0,0.0032895,0.0065789,0.0032895,0.0098684,0,0.0098684,0,0.0065789,0,0.0065789,0,0,0.0032895,0,0.0065789,0,0,0,0.0098684,0,0.0032895,0.0032895,0.0032895,0,0,0.0032895,0.0032895,0,0.0032895,0.0065789,0.0065789,0.0032895,0.0032895,0.0032895,0.0032895,0.0032895,0,0,0,0,0,0.0032895,0.0032895,0.0032895,0.0032895,0,0.0032895,0.0032895,0.0032895,0.0065789,0.0032895,0.0065789,0.0065789,0,0.0032895,0,0,0,0,0.0065789,0.0032895,0.0065789,0.0065789,0,0,0.0032895,0.0032895,0,0.0065789,0.0032895,0.0032895,0,0.0032895,0.0098684,0,0.0032895,0.0032895,0,0.0032895,0.0065789,0.0032895,0.0032895,0,0,0,0,0.0065789,0,0.0032895,0,0,0.0032895,0,0,0,0.0032895,0,0,0,0};

	AdderNet(feature_in[0],feature_Pre2[0][0],tau_inten[0][0],tau_amp[0][0]);

	int fixed_point=1;

//	for(int cout=0;cout<140;cout++)
//		for(int i=0;i<1;i++)
//			for(int j=0;j<1;j++)
//				{
//					if (fixed_point==0)
//						printf("OUT_resblock[%d][%d][%d]=%f\n",i,j,cout,feature_Pre2[i][j][cout]);
//					else
//						std::cout << "OUT_resblock=" << feature_Pre2[i][j][cout] << '\n';
//				}

	printf("*****************LIFETIME PRINT********************\n"
			"**************************************\n");

	for(int cout=0;cout<CHout_O1_3;cout++)
		for(int i=0;i<Hout_O1_3;i++)
			for(int j=0;j<Wout_O1_3;j++)
				{
					if(fixed_point==0)
						printf("OUT_final[%d][%d][%d]=%f\n",i,j,cout,tau_inten[i][j][cout]);
					else
						std::cout<<"OUT_final="<<tau_inten[i][j][cout]<<'\n';
				}

	for(int cout=0;cout<CHout_O1_3;cout++)
		for(int i=0;i<Hout_O1_3;i++)
			for(int j=0;j<Wout_O1_3;j++)
				{
					if(fixed_point==0)
						printf("OUT_final[%d][%d][%d]=%f\n",i,j,cout,tau_amp[i][j][cout]);
					else
						std::cout<<"OUT_final="<<tau_amp[i][j][cout]<<'\n';
				}

	return 0;
}
